(function($,undefined){window.NosUIApp={namespace:"nosui",defineOptions:function(defaults,options){if(typeof options!=="object"&&typeof defaults!=="object")return{};else if(typeof options==="object"&&typeof defaults==="object"){$.extend(true,defaults,options);if(typeof defaults.elAttrNames==="object"&&typeof defaults.namespace==="string")NosUIApp.applyCssNamespace(defaults.elAttrNames,defaults.namespace);return defaults}else if(typeof options!=="object"){if(typeof defaults.elAttrNames==="object"&&
typeof defaults.namespace==="string")NosUIApp.applyCssNamespace(defaults.elAttrNames,defaults.namespace);return defaults}else if(typeof defaults!=="object")return options},matchElType:function($elType,$el){var el=$el.get(0);if(!$elType.filter($el).length){var elSelector=NosUIApp.getFullElSelector($el);throw new Error("Incorrect element type targetted with the NOS-UI script. Element: "+elSelector);}},getFullElSelector:function($el){var el=$el.get(0),elAttrId=el.id,elIdSelector=elAttrId!==""?"#"+elAttrId:
"",elAttrClass=el.getAttribute("class"),elClassSelector=elAttrClass?"."+elAttrClass.trim().split(" ").join("."):"",elSelector=elIdSelector+elClassSelector;return elSelector},form:{isDisabled:function($el,$fauxEl,className){if(typeof $el=="undefined")throw new Error("missing $el parameter");else if(typeof $fauxEl=="undefined")throw new Error("missing $fauxEl parameter");else if(typeof className=="undefined")throw new Error("missing className parameter");if($el.prop("disabled")){$fauxEl.addClass(className);
return true}else{$fauxEl.removeClass(className);return false}}},applyCssNamespace:function(elAttrNames,nameSpace){$.each(elAttrNames,function(k,v){if(typeof v==="object")NosUIApp.applyCssNamespace(elAttrNames[k],nameSpace);else elAttrNames[k]=nameSpace+v})}};$.fn.extend({nosInputPlaceholder:function(options,disableMethod){var defaults={placeholder:null};options=NosUIApp.defineOptions(defaults,options);return this.each(function(){var $el=$(this);NosUIApp.matchElType($("input"),$el);if(typeof options.placeholder===
"string")val=options.placeholder;else val=$el.attr("placeholder");if(typeof val!=="string")return;function focusInput(){if(typeof options.onFocus==="function")options.onFocus($el);if($el.val()==val)$el.val("")}function blurInput(){if(typeof options.onBlur==="function")options.onBlur($el);if($el.val()=="")$el.val(val)}$el.val(val);$el.off({"focus.nosui-placeholder":focusInput,"blur.nosui-placeholder":blurInput});if(disableMethod===true)return;$el.on({"focus.nosui-placeholder":focusInput,"blur.nosui-placeholder":blurInput})})},
nosFormSelect:function(options,disableMethod){var defaults={elAttrNames:{typeDefault:{"defaultClass":"--default","dataName":"-type-default"},typeCustom:{"defaultClass":"--custom","dataName":"-type-custom","dataSelected":"-selected","listClass":"__list","itemClass":"__item","activeItemClass":"__item--active","firstItemClass":"__item--first","lastItemClass":"__item--last"},"elClass":"-element","fauxElClass":"","activeClass":"--active","mousedownClass":"--mousedown","disabledClass":"--disabled","dropdownButtonClass":"__dropdown-button",
"placeholderClass":"__placeholder"},namespace:"nosui-form-select",isOpen:false,hideOnFocusLoss:true,onInit:null,onClick:null,onChange:null,onMousedown:null,onBlur:null};options=NosUIApp.defineOptions(defaults,options);return this.each(function(){var $el=$(this);NosUIApp.matchElType($("select"),$el);if(!$el.closest("form").length>0)throw new Error("This element does not have an ancestor form element. Element: "+NosUIApp.getFullElSelector($el));var $elOptions=$el.find("option"),$selectedOption=$elOptions.filter(function(){return $(this).prop("selcted")===
true});$el.addClass(options.elAttrNames.elClass);if(disableMethod===true&&$el.data(options.elAttrNames.typeDefault.dataName)){$el.data(options.elAttrNames.typeDefault.dataName,false).off({"click.nosui":null,"change.nosui":null,"blur.nosui":null}).unwrap();return}else if(disableMethod===true&&$el.data(options.elAttrNames.typeCustom.dataName)){$el.data(options.elAttrNames.typeCustom.dataName,false).show();$el.prev().off({"click.nosui":null,"change.nosui":null}).find("."+options.elAttrNames.typeCustom.itemClass).off({"click.nosui":null,
"change.nosui":null}).end().remove();return}if(options.defaultDropdown==true){$el.data(options.elAttrNames.typeDefault.dataName,true).addClass(options.elAttrNames.elClass).wrap($("<div />",{"class":options.elAttrNames.fauxElClass+" "+options.elAttrNames.typeDefault.defaultClass,"id":$el.attr("id")?options.elAttrNames.fauxElClass+"-"+$el.attr("id"):""}));var elName=$el.attr("name")?$el.attr("name"):null;$fauxSelect=$el.parent();$fauxSelect.data("name",elName);var placeholderText=$selectedOption.length?
$selectedOption.text():$elOptions.first().text(),$placeholder=$("<div />",{"class":options.elAttrNames.placeholderClass,"text":placeholderText}).prependTo($fauxSelect),$dropdownButton=$("<div />",{"class":options.elAttrNames.dropdownButtonClass}).insertAfter($placeholder);NosUIApp.form.isDisabled($el,$fauxSelect,options.elAttrNames.disabledClass);if(typeof options.onInit==="function")options.onInit($el,$fauxSelect,options);$el.on({"click.nosui":function(e){NosUIApp.form.isDisabled($el,$fauxSelect,
options.elAttrNames.disabledClass);$fauxSelect.toggleClass(options.elAttrNames.activeClass);if(typeof options.onClick==="function")options.onClick($el,$fauxSelect,options)},"change.nosui":function(e){var text=$el.find(":selected").text();$placeholder.text(text);if(typeof options.onChange==="function")options.onChange($el,$fauxSelect,options)},"blur.nosui":function(e){$fauxSelect.removeClass(options.elAttrNames.active);if(typeof options.onBlur==="function")options.onBlur($el,$fauxSelect,options)}})}else{$el.data(options.elAttrNames.typeCustom.dataName,
true);function toggleDropdown($fauxSelect){$fauxSelect.toggleClass(options.elAttrNames.activeClass);$fauxSelectList.toggle();if($fauxSelectList.is(":hidden"))options.isOpen=false;else options.isOpen=true;if(options.hideOnFocusLoss)if(options.isOpen)$("body").on("click.nosui",function(e){toggleDropdown($fauxSelect)});else $("body").off("click.nosui")}var elName=$el.attr("name")?$el.attr("name"):null,$fauxSelect=$("<div />",{"class":options.elAttrNames.fauxElClass+" "+options.elAttrNames.typeCustom.defaultClass,
"id":$el.attr("id")?options.elAttrNames.fauxElClass+"-"+$el.attr("id"):""}).data("name",elName);NosUIApp.form.isDisabled($el,$fauxSelect,options.elAttrNames.disabledClass);$el.hide().before($fauxSelect);var $fauxSelectList=$("<div />",{"class":options.elAttrNames.typeCustom.listClass}).appendTo($fauxSelect).hide(),$dropdownButton=$("<div />",{"class":options.elAttrNames.dropdownButtonClass}).appendTo($fauxSelect);$elOptions.each(function(i){$("<div />",{"class":i==0?options.elAttrNames.typeCustom.activeItemClass+
" "+options.elAttrNames.typeCustom.itemClass:options.elAttrNames.typeCustom.itemClass,"text":$(this).text()}).data(NosUIApp.namespace+"-selected",$(this).prop("selected")).appendTo($fauxSelectList)});var $fauxOptions=$fauxSelect.find("."+options.elAttrNames.typeCustom.itemClass),$fauxSelectedOption=$fauxOptions.filter(function(){return $(this).data(NosUIApp.namespace+"-selected")});$fauxOptions.first().addClass(options.elAttrNames.typeCustom.firstItemClass);$fauxOptions.last().addClass(options.elAttrNames.typeCustom.lastItemClass);
if(!$fauxSelectedOption.length)$fauxSelectedOption=$fauxOptions.eq(0);var $placeholder=$("<div />",{"class":options.elAttrNames.placeholderClass,"text":$fauxSelectedOption.text()}).insertBefore($fauxSelectList);NosUIApp.form.isDisabled($el,$fauxSelect,options.elAttrNames.disabledClass);if(typeof options.onInit==="function")options.onInit($el,$fauxSelect,options);$fauxSelect.on({"click.nosui":function(e){if(options.hideOnFocusLoss)e.stopPropagation();if(NosUIApp.form.isDisabled($el,$fauxSelect,options.elAttrNames.disabledClass)===
true)return;if(typeof options.onClick==="function")options.onClick($el,$fauxSelect,options);toggleDropdown($fauxSelect)},"mousedown.nosui":function(e){if(NosUIApp.form.isDisabled($el,$fauxSelect,options.elAttrNames.disabledClass))return;$fauxSelect.addClass(options.elAttrNames.mousedownClass);$("body").on("mouseup.nosui",function(e){$fauxSelect.removeClass(options.elAttrNames.mousedownClass);$("body").off("mouseup.nosui")});if(typeof options.onMousedown==="function")options.onMousedown($el,$fauxSelect,
options)},"mouseup.nosui":function(e){$fauxSelect.removeClass(options.elAttrNames.mousedownClass);$("body").off("mouseup.nosui")}});$fauxOptions.on({"click.nosui":function(e){e.stopPropagation();var $this=$(this),index=$this.index(),text=$this.text();$this.addClass(options.elAttrNames.typeCustom.activeItemClass).data("nosui-selected","selected").siblings().removeClass(options.elAttrNames.typeCustom.activeItemClass).data("nosui-selected",null);$placeholder.text(text);$elOptions.prop("selected",false).eq(index).prop("selected",
true);$fauxOptions.data(NosUIApp.namespace+"selected",false).eq(index).data(NosUIApp.namespace+"selected",true);$el.change();if(typeof options.onChange==="function")options.onChange($el,$fauxSelect,options);toggleDropdown($fauxSelect)}})}})},nosInputCheckbox:function(options,disableMethod){var defaults={elAttrNames:{"fauxElClass":"","disabledClass":"--disabled","checkedClass":"--checked","mousedownClass":"--mousedown"},namespace:"nosui-form-checkbox",onInit:null,onClick:null,onMousedown:null};options=
NosUIApp.defineOptions(defaults,options);return this.each(function(){var $el=$(this);NosUIApp.matchElType($('input[type="checkbox"]'),$el);if(!$el.closest("form").length>0)throw new Error("This element does not have an ancestor form element. Element: "+NosUIApp.getFullElSelector($el));if(disableMethod===true){$el.prev("."+options.elAttrNames.fauxElClass).off().remove();$el.show();return}var $fauxCheckbox=$("<div />",{"class":options.elAttrNames.fauxElClass+" "+options.elAttrNames.inputClass}).data("nosui-checked",
$el.prop("checked")).insertBefore($el.hide());NosUIApp.form.isDisabled($el,$fauxCheckbox,options.elAttrNames.disabledClass);if($el.prop("checked"))$fauxCheckbox.addClass(options.elAttrNames.checkedClass);if(typeof options.onInit==="function")options.onInit($el,$fauxCheckbox,options);$fauxCheckbox.on({"click.nosui":function(e){if(NosUIApp.form.isDisabled($el,$fauxCheckbox,options.elAttrNames.disabledClass))return;var $this=$(this);$this.toggleClass(options.elAttrNames.checkedClass);if($el.prop("checked")){$el.prop("checked",
false);$this.data("nosui-checked",false)}else{$el.prop("checked",true);$this.data("nosui-checked",true)}if(typeof options.onClick==="function")options.onClick($el,$fauxCheckbox,options)},"mousedown.nosui":function(e){if(NosUIApp.form.isDisabled($el,$fauxCheckbox,options.elAttrNames.disabledClass))return;$fauxCheckbox.addClass(options.elAttrNames.mousedownClass);$("body").on("mouseup.nosui",function(e){$fauxCheckbox.removeClass(options.elAttrNames.mousedownClass);$("body").off("mouseup.nosui")});if(typeof options.onMousedown===
"function")options.onMousedown($el,$fauxCheckbox,options)},"mouseup.nosui":function(e){$fauxCheckbox.removeClass(options.elAttrNames.mousedownClass);$("body").off("mouseup.nosui")}})})},nosInputRadio:function(options,disableMethod){var defaults={elAttrNames:{"fauxElClass":"","inputClass":"-text","disabledClass":"--disabled","checkedClass":"--checked","mousedownClass":"--mousedown","dataName":"-name"},namespace:"nosui-form-radio",onInit:null,onClick:null,onMousedown:null};options=NosUIApp.defineOptions(defaults,
options);return this.each(function(i,el){var $el=$(el);NosUIApp.matchElType($('input[type="radio"]'),$el);if(!$el.closest("form").length>0)throw new Error("This element does not have an ancestor form element. Element: "+NosUIApp.getFullElSelector($el));if(disableMethod===true){$el.prev("."+options.elAttrNames.fauxElClass).off().remove();$el.show();return}options.elName=$el.attr("name");var $elSiblings=$el.closest("form").find('input[type="radio"]').filter(function(){return $(this).attr("name")==options.elName}).not($el),
$fauxRadio=$("<div />",{"class":options.elAttrNames.fauxElClass}).data(NosUIApp.namespace+"-name",options.elName).data(NosUIApp.namespace+"-checked",$el.prop("checked")).insertBefore($el.hide());if($fauxRadio.data(NosUIApp.namespace+"-checked"))$fauxRadio.addClass(options.elAttrNames.checkedClass);if(NosUIApp.form.isDisabled($el,$fauxRadio,options.elAttrNames.disabledClass))return;if(typeof options.onInit==="function")options.onInit($el,$fauxRadio,options);$fauxRadio.on({"click.nosui":function(e){if(NosUIApp.form.isDisabled($el,
$fauxRadio,options.elAttrNames.disabledClass))return;var $fauxSiblings=$fauxRadio.closest("form").find("."+options.elAttrNames.fauxElClass).filter(function(){if($(this).data(NosUIApp.namespace+"-name")==options.elName)return true;else return false}).not($fauxRadio);$fauxRadio.addClass(options.elAttrNames.checkedClass);$fauxSiblings.removeClass(options.elAttrNames.checkedClass);$el.prop("checked",true);$fauxRadio.data(NosUIApp.namespace+"-checked",true);$elSiblings.prop("checked",false);$fauxSiblings.data(NosUIApp.namespace+
"-checked",false);if(typeof options.onClick==="function")options.onClick($el,$fauxRadio,options)},"mousedown.nosui":function(e){if(NosUIApp.form.isDisabled($el,$fauxRadio,options.elAttrNames.disabledClass))return;$fauxRadio.addClass(options.elAttrNames.mousedownClass);$("body").on("mouseup.nosui",function(e){$fauxRadio.removeClass(options.elAttrNames.mousedownClass);$("body").off("mouseup.nosui")});if(typeof options.onMousedown==="function")options.onMousedown($el,$fauxRadio,options)},"mouseup.nosui":function(e){$fauxRadio.removeClass(options.elAttrNames.mousedownClass);
$("body").off("mouseup.nosui")}})})},nosInputFile:function(options,disableMethod){var defaults={elAttrNames:{"elClass":"__element","fauxElClass":"","disabledClass":"--disabled","buttonClass":"__button","placeholderClass":"__placeholder"},namespace:"nosui-form-file",placeholderText:"No file chosen",buttonText:"Choose File",onInit:null,onChange:null};options=NosUIApp.defineOptions(defaults,options);return this.each(function(){var $el=$(this);NosUIApp.matchElType($('input[type="file"]'),$el);if(!$el.closest("form").length>
0)throw new Error("This element does not have an ancestor form element. Element: "+NosUIApp.getFullElSelector($el));$el.addClass(options.elAttrNames.elClass);var $fauxInputFile=$("<div />",{"class":options.elAttrNames.fauxElClass}),$placeholder=$("<div />",{"class":options.elAttrNames.placeholderClass,"text":options.placeholderText}),$button=$("<div />",{"class":options.elAttrNames.buttonClass,"text":options.buttonText});NosUIApp.form.isDisabled($el,$fauxInputFile,options.elAttrNames.disabledClass);
$el.wrap($fauxInputFile).before($button,$placeholder);if(typeof options.onInit==="function")options.onInit($el,$fauxCheckbox,options);$el.on({change:function(){$placeholder.text($el.val());if(typeof options.onChange==="function")options.onChange($el,$fauxInputFile)}})})},nosTooltip:function(options){var defaults={elAttrNames:{"popup":"nosui-tooltip__popup","container":"nosui-tooltip","dataName":"nosui-tooltip"},text:null};options=NosUIApp.defineOptions(defaults,options);return this.each(function(){var $el=
$(this),$container=$("<div />",{"class":options.elAttrNames.container}),$tooltip=$("<div />",{"class":options.elAttrNames.popup,"text":options.text?options.text:$el.data(options.elAttrNames.dataName)});$el.wrap($container).after($tooltip)})}})})(jQuery);